# ==============================================================================
# CONFIG NAME: timur.conf
# DESCRIPTION: Nginx VirtualHost untuk Backend Timur (Port 8169)
# TASK       : SEVIMA Sysadmin Task - Soal C.1 & C.2
# AUTHOR     : Angga Alfiansah
# ==============================================================================

server {
    # Mendengarkan pada Port 8169 sesuai pemetaan backend HAProxy.
    listen 8169;
    server_name timur.sevima.site;

    # Direktori konten statis yang dikelola oleh entrypoint.
    root /var/www/html/timur;
    index index.html;

    # --- KONFIGURASI HEADER (Soal C.2) ---
    add_header X-Owner-By "Angga Alfiansah";
    
    # KOREKSI PENTING: Soal C.2.b meminta header X-Served-By diisi "apache2"
    # meskipun server yang digunakan adalah Nginx. Ini adalah pengujian manipulasi header.
    add_header X-Served-By "apache2"; 

    # --- PENANGANAN REQUEST ---
    location / {
        # Mencoba melayani file, jika tidak ada kirim status 404.
        try_files $uri $uri/ =404;
    }

    # Logging aktivitas untuk site Timur
    error_log /var/log/nginx/timur_error.log;
    access_log /var/log/nginx/timur_access.log;
}